public class Trayecto {
    // Atributos y métodos de la clase Trayecto...

    private AdaptadorConcreto adaptador;

    public Double calcularDemora() {
        if (this.seDetieneEnCadaParada()) {
            // Calcular demoras por secciones
            Double tiempoTotalAprox = 0.0;
            for (int i = 0; i < paradas.size() - 1; i++) {
                Parada paradaActual = this.paradas.get(i);
                Parada siguienteParada = this.paradas.get(i + 1);
                Double distancia = this.adaptador.adaptar(paradaActual, siguienteParada);
                Double tiempoEntreParadas = calcularTiempo(distancia);
                tiempoTotalAprox += tiempoEntreParadas;
            }
            return tiempoTotalAprox;
        } else {
            // Calcular demora total aproximada
            Parada primeraParada = this.paradas.get(0);
            Parada ultimaParada = this.paradas.get(paradas.size() - 1);
            Double distanciaTotal = this.adaptador.adaptar(primeraParada, ultimaParada);
            return calcularTiempo(distanciaTotal);
        }
    }
}

class AdaptadorConcreto implements Adaptador {
    private DistanceMatrix api;

    public Double adaptar(Parada origen, Parada destino) {
        Integer distancia = this.api.sacarDistancia(origen, destino);
        return adaptarDistancia(distancia);
    }

    public Double adaptarDistancia(Integer distancia) {
        // Implementación de adaptación de distancia...
        return (double) distancia; // Por ahora solo se devuelve la misma distancia
    }
}

public interface Adaptador {
    public Double adaptar(Parada origen, Parada destino);
}

// Código de la API
public interface DistanceMatrix {
    public Integer sacarDistancia(Parada origen, Parada destino);
}

